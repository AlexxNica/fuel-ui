<% var page = this %>
  <div class="control-group wrapper" data-nested="true">
    <fieldset class="fieldset">
      <legend><%- legend %></legend>
      <%
        _.each(_.keys(settings), function(key) {
          if (_.isObject(settings[key])) {
            var recursiveFieldset = page.template({settings: settings[key], legend: key});
        %>
            <%= recursiveFieldset %>
        <%
          } else {
        %>
            <div class="wrapper" data-nested="false">
              <label class="control-label" for="<%- key %>"><%- key %></label>
              <div class="controls">
                <input type="text" class="input-large" name="<%- key %>" value="<%- settings[key] %>" <%= cluster.task('deploy', 'running') ? 'disabled ' : '' %>/>
              </div>
            </div>
        <%
          }
        })
      %>
    </fieldset>
  </div>
